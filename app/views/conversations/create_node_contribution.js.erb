$("#contrib #error_explanation").remove();
<% unless @contribution.errors.any? %>

  hide_contribution_tool();

  <% if @contribution.parent %>
    <% if @contribution.parent.level_of_indentation < @contribution.level_of_indentation %>
      $('#show-contribution-<%= @contribution.parent.id %>').find('ol.thread-list:first').append("<%= escape_javascript( render :partial => "conversations/threaded_contribution_template", :locals => { :contribution => @contribution } ) %>");
    <% else %>
      $('#show-contribution-<%= @contribution.parent.id %>').closest('ol.thread-list').append("<%= escape_javascript( render :partial => "conversations/threaded_contribution_template", :locals => { :contribution => @contribution } ) %>");
    <% end %>
  <% else %>
    $('#show_conversation > ol.thread-list').last().append("<%= escape_javascript( render :partial => "conversations/threaded_contribution_template", :locals => { :contribution => @contribution } ) %>");
  <% end %>
<% else %>

  $("#contrib fieldset").first().before("<%= escape_javascript( render :partial => 'contributions/creation_errors' ) %>");

<% end %>
