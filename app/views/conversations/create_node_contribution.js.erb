<% unless @contribution.errors.any? %>

  hide_contribution_tool();

  <% if @contribution.parent %>
    $('ol.thread-list #show-contribution-<%= @contribution.parent.id %>').append("<%= escape_javascript( render :partial => "conversations/threaded_contribution_template", :locals => { :contribution => @contribution } ) %>");
  <% else %>
    $('#show_conversation ol.thread-list').first().append("<%= escape_javascript( render :partial => "conversations/threaded_contribution_template", :locals => { :contribution => @contribution } ) %>");
  <% end %>

  enable_post_to_conversation($('#respond-to-<%= @contribution.id %>'));

<% else %>
  $("#action-div-<%= @contribution.id %>").html("<%= escape_javascript(error_messages_for(@contribution))%>");
<% end %>
