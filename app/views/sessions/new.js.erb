<% if person_signed_in? %>
  $.ajax({
    url: lastAjaxSettings.url,
    data: lastAjaxSettings.data,
    dataType: lastAjaxSettings.dataType,
    type: lastAjaxSettings.type,
    beforeSend: lastAjaxSettings.beforeSend,
    success: lastAjaxSettings.success,
    complete: lastAjaxSettings.complete,
    error: lastAjaxSettings.error
  });
<% else %>
  // Devise populates login error message in flash.alert
  $('#ajax-login-form').find('.validation-error')
    .html('<%= flash.alert %>');
<% end %>
