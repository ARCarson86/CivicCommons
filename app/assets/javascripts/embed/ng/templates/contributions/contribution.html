<div class="contribution row" id="contribution-{{contribution.id}}">
  <user-avatar user="contribution.author"></user-avatar>
  <div class="content">
    <header>
      <div class="actions pull-right" ng-show="showactions">
        <a href ng-click="editContribution = !editContribution">
          <i class="fa fa-edit"></i>
        </a>
        <a href ng-click="minimized = !minimized" ng-show="contribution.contributions.length > 0">
          <i class="fa" ng-class="minimized ? 'fa-plus' : 'fa-minus'"></i>
        </a>
        <a href="">
          <i class="fa fa-flag"></i>
        </a>
      </div>
      <user user="contribution.author" ng-show="contribution.author"></user>
      <span class="created-date">{{contribution.created_at | date : 'MMM d, y h:mm a'}}</span>
    </header>

    <contribute ng-if="editContribution" contribution="contribution"></contribute>
    <div ng-if="!editContribution" class="clearfix" ng-bind-html="contribution.content"></div>


    <div class="comment-meta">
      <span ng-hide="contribution.parent_id">
        {{contribution.contributions.length}} Comments | 
      </span>
      <a href ng-click="replyActive = !replyActive">
        <i class="fa fa-reply"></i> Reply to {{contribution.author.first_name}}
      </a>
    </div>

    <div class="contributions" ng-hide="minimized" ng-if="contribution.contributions.length > 0">
      <contributions>
        <contribution contribution="contribution" ng-repeat="contribution in contribution.contributions"></contribution>
      </contributions>
    </div>

    <contribute ng-if="replyActive" contribution="newContribution" in-reply-to="contribution.parent_id != null ? contribution.parent_id : contribution.id"></contribute>
  </div>
</div>
