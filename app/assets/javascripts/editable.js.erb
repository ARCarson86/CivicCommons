(function($) {
  var defaults = {
    script_url : '<%=asset_path "tiny_mce/tiny_mce.js" %>',
    theme : "advanced",
    width : '100%',
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,bullist,numlist,|,undo,redo,|,cut,copy,paste",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    plugins : "autolink,inlinepopups"
  };

  $(document).delegate(".editable textarea", "focus", function(event) {
    $(this).parent(".editable").addClass("editor-active");
    defaults.auto_focus = $(this).attr("id");
    $(this).tinymce(defaults);
  });
  $(document).delegate(".editable .cancel", "click", function(event) {
    $(this).closest(".editable").removeClass("editor-active").children("textarea").text("").tinymce().remove();
    event.preventDefault();
  });

})(jQuery);
